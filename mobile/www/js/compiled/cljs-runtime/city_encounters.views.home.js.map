{"version":3,"sources":["city_encounters/views/home.cljs"],"mappings":"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","names":["city-encounters.views.home/SIZES","city-encounters.views.home/OUTCOME_TYPE","city-encounters.views.home/OUTCOMES","city-encounters.views.home/on-success","res","re-frame.core/dispatch","city-encounters.views.home/on-error","js/alert","city-encounters.views.home/get-encounter","size","outcome","extra","outcomes-string","cljs.core.subs","p1__29426#","p2__29427#","cljs.core.reduce","cljs.core.concat","c","city-encounters.services.api/get-random-encouner","cljs.core.async.take_BANG_","cljs.core._EQ_","city-encounters.views.home/set-current-size","size-string","city-encounters.views.home/set-current-outcome","outcome-string","city-encounters.views.home/set-extra-outcomes","add?","city-encounters.views.home/Home-page","cljs.core/deref","encounter","re_frame.core.subscribe","current-size","current-outcome","extra-outcomes","is-loading?","active-page","saved-outcomes","city-encounters.views.saved/Saved-page","city-encounters.views.settings/Settings-page","iter__4622__auto__","s__29430","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4620__auto__","size__4621__auto__","cljs.core/count","b__29432","cljs.core/chunk-buffer","i__29431","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__29429","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","city-encounters.components.Button/Button","s__29434","b__29436","i__29435","iter__29433","s__29438","b__29440","i__29439","iter__29437","is-in-list?","p1__29428#","cljs.core/some","cljs.core/not","city-encounters.components.Loader/Loader","city-encounters.components.Results/Results","city-encounters.components.Nav/Nav","cljs.core/chunk-first"],"sourcesContent":["(ns city-encounters.views.home\n  (:require [cljs.core.async :refer [take!]]\n            [re-frame.core :as re-frame]\n            [city-encounters.services.api :as api]\n            [city-encounters.components.Results :refer [Results]]\n            [city-encounters.components.Button :refer [Button]]\n            [city-encounters.components.Loader :refer [Loader]]\n            [city-encounters.components.Nav :refer [Nav]]\n            [city-encounters.views.saved :as Saved]\n            [city-encounters.views.settings :as Settings]))\n\n\n(def SIZES [\"Hamlet\" \"Village\" \"CITY\" \"TOWN\" \"METROPOLIS\"])\n(def OUTCOME_TYPE [\"Good\" \"Neutral\" \"Bad\"])\n(def OUTCOMES [\"Combat\" \"Roleplay\" \"Hook\"])\n\n(defn on-success [res]\n  (re-frame/dispatch [:set-is-loading false])\n  (re-frame/dispatch [:set-encounter (:body res)]))\n\n(defn on-error []\n  (re-frame/dispatch [:set-is-loading false])\n  (js/alert \"There was an error\"))\n\n(defn get-encounter [size outcome extra]\n  (re-frame/dispatch [:set-is-loading true])\n  (let [outcomes-string (subs (reduce #(str %1 \",\" %2) \"\" (concat [outcome] extra)) 1)\n        c (api/get-random-encouner size outcomes-string)]\n    (take! c\n      (fn [res]\n        (if (= (:status res) 200)\n          (on-success res)\n          (on-error))))))\n\n(defn set-current-size [size-string]\n  (re-frame/dispatch [:set-current-size size-string]))\n\n(defn set-current-outcome [outcome-string]\n  (re-frame/dispatch [:set-current-outcome outcome-string]))\n\n(defn set-extra-outcomes [outcome-string add?]\n  (if add?\n    (re-frame/dispatch [:add-extra-outcome outcome-string])\n    (re-frame/dispatch [:remove-extra-outcome outcome-string])))\n\n(defn Home-page []\n  (let [encounter @(re-frame/subscribe [:encounter])\n        current-size @(re-frame/subscribe [:current-size])\n        current-outcome @(re-frame/subscribe [:current-outcome])\n        extra-outcomes @(re-frame/subscribe [:extra-outcomes])\n        is-loading? @(re-frame/subscribe [:is-loading])\n        active-page @(re-frame/subscribe [:active-page])\n        saved-outcomes @(re-frame/subscribe [:saved-outcomes])]\n    [:div.Home.page.text-center.mx-auto.pt-4 {:class (if encounter \"Home__encounter\" \"\")}\n     ; (print saved-outcomes)\n     [Saved/Saved-page active-page]\n     [Settings/Settings-page active-page]\n     [:div.Home__options.px-2\n      [:h2.text-4xl.pb-2.pt-2 \"Choose Your Encounter Settings\"]\n      [:div.Home__buttonWrapper.flex.flex-wrap.py-4.justify-center\n       [:h3.min-w-full.text-3xl.pb-2 \"Location Size\"]\n       (for [size SIZES]\n         ^{:key size} [Button size (= current-size size) #(set-current-size size)])]\n      [:div.Home__buttonWrapper.flex.flex-wrap.py-4.justify-center\n       [:h3.min-w-full.text-3xl.pb-2 \"Outcome\"]\n       (for [outcome OUTCOME_TYPE]\n         ^{:key outcome} [Button outcome (= current-outcome outcome) #(set-current-outcome outcome)])]\n      [:div.Home__buttonWrapper.flex.flex-wrap.py-4.justify-center\n       [:h3.min-w-full.text-3xl.pb-2 \"Extras\"]\n       (for [outcome OUTCOMES]\n         (let [is-in-list? (some #(= outcome %) extra-outcomes)]\n           ^{:key outcome} [Button outcome is-in-list? #(set-extra-outcomes outcome (not is-in-list?))]))]\n      [:button.Button__generate.text-xl.text-white.rounded.uppercase.mt-4 {:on-click #(get-encounter current-size current-outcome extra-outcomes)} \"Generate\"]\n      [:div.Home__options__bottom.text-center.flex.items-center.flex-col.justify-center {:on-click #(re-frame/dispatch [:set-encounter nil])}\n       [:h3.text-white.text-xl.flex-grow-0  \"New Encounter?\"]\n       [:svg {:aria-hidden \"true\" :focusable \"false\" :role \"img\" :style {:width \"15px\"} :xmlns \"http://www.w3.org/2000/svg\" :viewBox \"0 0 320 512\"}\n         [:path {:fill \"white\" :d \"M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z\"}]]\n       [:div.Home__options__bottom__border]]]\n     (if is-loading?\n       [Loader]\n       (if encounter\n         [Results encounter saved-outcomes]\n         nil))\n     [Nav]]))\n"]}